(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-list"],{"2b83":function(e,t,n){},"360d":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var c=n("a27e");function r(e){return c["a"].get("/goods/detail/".concat(e))}function a(){return c["a"].get("/categories")}function o(e){return c["a"].get("/search",{params:e})}},"96fc":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r=Object(c["T"])("data-v-3b849ce1");Object(c["C"])("data-v-3b849ce1");var a={class:"product-list-wrap"},o={class:"product-list-content"},i={class:"category-header wrap"},s={class:"header-search"},d=Object(c["j"])("i",{class:"nbicon nbSearch"},null,-1),u={class:"content"},l={class:"product-info"},f={class:"name"},b={class:"subtitle"},p={class:"price"},j={key:1,class:"empty",src:"https://s.yezgea02.com/1604041313083/kesrtd.png",alt:"搜索"};Object(c["A"])();var g=r((function(e,t,n,g,h,O){var v=Object(c["H"])("van-tab"),y=Object(c["H"])("van-tabs"),k=Object(c["H"])("van-list"),m=Object(c["H"])("van-pull-refresh");return Object(c["z"])(),Object(c["f"])("div",a,[Object(c["j"])("div",o,[Object(c["j"])("header",i,[Object(c["j"])("i",{class:"nbicon nbfanhui",onClick:t[1]||(t[1]=function(){return g.goBack.apply(g,arguments)})}),Object(c["j"])("div",s,[d,Object(c["S"])(Object(c["j"])("input",{type:"text",class:"search-title","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.keyword=t})},null,512),[[c["O"],e.keyword]])]),Object(c["j"])("span",{class:"search-btn",onClick:t[3]||(t[3]=function(){return g.getSearch.apply(g,arguments)})},"搜索")]),Object(c["j"])(y,{type:"card",color:"#1baeae",onClick:g.changeTab},{default:r((function(){return[Object(c["j"])(v,{title:"推荐",name:""}),Object(c["j"])(v,{title:"新品",name:"new"}),Object(c["j"])(v,{title:"价格",name:"price"})]})),_:1},8,["onClick"])]),Object(c["j"])("div",u,[Object(c["j"])(m,{modelValue:e.refreshing,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.refreshing=t}),onRefresh:g.onRefresh,class:"product-list-refresh"},{default:r((function(){return[Object(c["j"])(k,{loading:e.loading,"onUpdate:loading":t[4]||(t[4]=function(t){return e.loading=t}),finished:e.finished,"finished-text":e.productList.length?"没有更多了":"搜索想要的商品",onLoad:g.onLoad,onOffset:t[5]||(t[5]=function(e){return 10})},{default:r((function(){return[e.productList.length?(Object(c["z"])(!0),Object(c["f"])(c["a"],{key:0},Object(c["F"])(e.productList,(function(t,n){return Object(c["z"])(),Object(c["f"])("div",{class:"product-item",key:n,onClick:function(e){return g.productDetail(t)}},[Object(c["j"])("img",{src:e.$filters.prefix(t.goodsCoverImg)},null,8,["src"]),Object(c["j"])("div",l,[Object(c["j"])("p",f,Object(c["L"])(t.goodsName),1),Object(c["j"])("p",b,Object(c["L"])(t.goodsIntro),1),Object(c["j"])("span",p,"￥ "+Object(c["L"])(t.sellingPrice),1)])],8,["onClick"])})),128)):(Object(c["z"])(),Object(c["f"])("img",j))]})),_:1},8,["loading","finished","finished-text","onLoad"])]})),_:1},8,["modelValue","onRefresh"])])])})),h=(n("99af"),n("5530")),O=(n("96cf"),n("1da1")),v=n("6c02"),y=n("360d"),k={setup:function(){var e=Object(v["c"])(),t=Object(v["d"])(),n=Object(c["D"])({keyword:e.query.keyword||"",searchBtn:!1,seclectActive:!1,refreshing:!1,list:[],loading:!1,finished:!1,productList:[],totalPage:0,page:1,orderBy:""}),r=function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var c,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c=e.query.categoryId,c||n.keyword){t.next=5;break}return n.finished=!0,n.loading=!1,t.abrupt("return");case 5:return t.next=7,Object(y["c"])({pageNumber:n.page,goodsCategoryId:c,keyword:n.keyword,orderBy:n.orderBy});case 7:r=t.sent,a=r.data,o=r.data.list,n.productList=n.productList.concat(o),n.totalPage=a.totalPage,n.loading=!1,n.page>=a.totalPage&&(n.finished=!0);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){t.go(-1)},o=function(e){t.push({path:"/product/".concat(e.goodsId)})},i=function(){d()},s=function(){!n.refreshing&&n.page<n.totalPage&&(n.page=n.page+1),n.refreshing&&(n.productList=[],n.refreshing=!1),r()},d=function(){n.refreshing=!0,n.finished=!1,n.loading=!0,n.page=1,s()},u=function(e){console.log("name",e),n.orderBy=e,d()};return Object(h["a"])(Object(h["a"])({},Object(c["M"])(n)),{},{goBack:a,productDetail:o,getSearch:i,changeTab:u,onLoad:s,onRefresh:d})}},m=(n("fade"),n("d959")),w=n.n(m);const L=w()(k,[["render",g],["__scopeId","data-v-3b849ce1"]]);t["default"]=L},"99af":function(e,t,n){"use strict";var c=n("23e7"),r=n("d039"),a=n("e8b5"),o=n("861d"),i=n("7b0b"),s=n("50c4"),d=n("8418"),u=n("65f0"),l=n("1dde"),f=n("b622"),b=n("2d00"),p=f("isConcatSpreadable"),j=9007199254740991,g="Maximum allowed index exceeded",h=b>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),O=l("concat"),v=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)},y=!h||!O;c({target:"Array",proto:!0,forced:y},{concat:function(e){var t,n,c,r,a,o=i(this),l=u(o,0),f=0;for(t=-1,c=arguments.length;t<c;t++)if(a=-1===t?o:arguments[t],v(a)){if(r=s(a.length),f+r>j)throw TypeError(g);for(n=0;n<r;n++,f++)n in a&&d(l,f,a[n])}else{if(f>=j)throw TypeError(g);d(l,f++,a)}return l.length=f,l}})},fade:function(e,t,n){"use strict";n("2b83")}}]);
//# sourceMappingURL=product-list.2bc3bf98.js.map