(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0a39":function(e,t,n){"use strict";n("2146")},2136:function(e,t,n){"use strict";n("2b4f")},2146:function(e,t,n){},"2b4f":function(e,t,n){},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),a=n("23cb"),o=n("50c4");e.exports=function(e){var t=r(this),n=o(t.length),l=arguments.length,i=a(l>1?arguments[1]:void 0,n),c=l>2?arguments[2]:void 0,u=void 0===c?n:a(c,n);while(u>i)t[i++]=e;return t}},"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),o=n("e8b5"),l=n("861d"),i=n("7b0b"),c=n("50c4"),u=n("8418"),s=n("65f0"),d=n("1dde"),f=n("b622"),b=n("2d00"),m=f("isConcatSpreadable"),j=9007199254740991,p="Maximum allowed index exceeded",g=b>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=d("concat"),h=function(e){if(!l(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)},O=!g||!v;r({target:"Array",proto:!0,forced:O},{concat:function(e){var t,n,r,a,o,l=i(this),d=s(l,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?l:arguments[t],h(o)){if(a=c(o.length),f+a>j)throw TypeError(p);for(n=0;n<a;n++,f++)n in o&&u(d,f,o[n])}else{if(f>=j)throw TypeError(p);u(d,f++,o)}return d.length=f,d}})},a55b:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"login"},o=Object(r["j"])("img",{class:"logo",src:"https://s.yezgea02.com/1604045825972/newbee-mall-vue3-app-logo.png",alt:""},null,-1),l={key:0,class:"login-body login"},i={style:{margin:"16px"}},c=Object(r["i"])("登录"),u={key:1,class:"login-body register"},s={style:{margin:"16px"}},d=Object(r["i"])("注册");function f(e,t,n,f,b,m){var j=Object(r["H"])("s-header"),p=Object(r["H"])("van-field"),g=Object(r["H"])("vue-img-verify"),v=Object(r["H"])("van-button"),h=Object(r["H"])("van-form");return Object(r["z"])(),Object(r["f"])("div",a,[Object(r["j"])(j,{name:"login"==e.type?"登录":"注册",back:"/home"},null,8,["name"]),o,"login"==e.type?(Object(r["z"])(),Object(r["f"])("div",l,[Object(r["j"])(h,{onSubmit:f.onSubmit},{default:Object(r["R"])((function(){return[Object(r["j"])(p,{modelValue:e.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.username=t}),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),Object(r["j"])(p,{modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),Object(r["j"])(p,{center:"",clearable:"",label:"验证码",placeholder:"输入验证码",modelValue:e.verify,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.verify=t})},{button:Object(r["R"])((function(){return[Object(r["j"])(g,{ref:"verifyRef"},null,512)]})),_:1},8,["modelValue"]),Object(r["j"])("div",i,[Object(r["j"])("div",{class:"link-register",onClick:t[4]||(t[4]=function(e){return f.toggle("register")})},"立即注册"),Object(r["j"])(v,{round:"",block:"",color:"#1baeae","native-type":"submit"},{default:Object(r["R"])((function(){return[c]})),_:1})])]})),_:1},8,["onSubmit"])])):(Object(r["z"])(),Object(r["f"])("div",u,[Object(r["j"])(h,{onSubmit:f.onSubmit},{default:Object(r["R"])((function(){return[Object(r["j"])(p,{modelValue:e.username1,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.username1=t}),name:"username1",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),Object(r["j"])(p,{modelValue:e.password1,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.password1=t}),type:"password",name:"password1",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),Object(r["j"])(p,{center:"",clearable:"",label:"验证码",placeholder:"输入验证码",modelValue:e.verify,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.verify=t})},{button:Object(r["R"])((function(){return[Object(r["j"])(g,{ref:"verifyRef"},null,512)]})),_:1},8,["modelValue"]),Object(r["j"])("div",s,[Object(r["j"])("div",{class:"link-login",onClick:t[8]||(t[8]=function(e){return f.toggle("login")})},"已有登录账号"),Object(r["j"])(v,{round:"",block:"",color:"#1baeae","native-type":"submit"},{default:Object(r["R"])((function(){return[d]})),_:1})])]})),_:1},8,["onSubmit"])]))])}var b=n("5530"),m=(n("e7e5"),n("d399")),j=(n("96cf"),n("1da1")),p=n("0eaf"),g={class:"img-verify"};function v(e,t,n,a,o,l){return Object(r["z"])(),Object(r["f"])("div",g,[Object(r["j"])("canvas",{ref:"verify",width:e.width,height:e.height,onClick:t[1]||(t[1]=function(){return a.handleDraw.apply(a,arguments)})},null,8,["width","height"])])}n("99af"),n("cb29");var h={setup:function(){var e=Object(r["E"])(null),t=Object(r["D"])({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",width:120,height:40,imgCode:""});Object(r["w"])((function(){t.imgCode=l()}));var n=function(){t.imgCode=l()},a=function(e,t){return parseInt(Math.random()*(t-e)+e)},o=function(e,t){var n=a(e,t),r=a(e,t),o=a(e,t);return"rgb(".concat(n,",").concat(r,",").concat(o,")")},l=function(){var n=e.value.getContext("2d");n.fillStyle=o(180,230),n.fillRect(0,0,t.width,t.height);for(var r="",l=0;l<4;l++){var i=t.pool[a(0,t.pool.length)];r+=i;var c=a(18,40),u=a(-30,30);n.font=c+"px Simhei",n.textBaseline="top",n.fillStyle=o(80,150),n.save(),n.translate(30*l+15,15),n.rotate(u*Math.PI/180),n.fillText(i,-10,-15),n.restore()}for(var s=0;s<5;s++)n.beginPath(),n.moveTo(a(0,t.width),a(0,t.height)),n.lineTo(a(0,t.width),a(0,t.height)),n.strokeStyle=o(180,230),n.closePath(),n.stroke();for(var d=0;d<40;d++)n.beginPath(),n.arc(a(0,t.width),a(0,t.height),1,0,2*Math.PI),n.closePath(),n.fillStyle=o(150,200),n.fill();return r};return Object(b["a"])(Object(b["a"])({},Object(r["M"])(t)),{},{verify:e,handleDraw:n})}},O=(n("0a39"),n("d959")),y=n.n(O);const w=y()(h,[["render",v]]);var V=w,k=n("9a1b"),C=n("495f"),x=n("8237"),R=n.n(x),S={setup:function(){var e=Object(r["E"])(null),t=Object(r["D"])({username:"",password:"",username1:"",password1:"",type:"login",imgCode:"",verify:""}),n=function(e){t.type=e,t.verify=""},a=function(){var n=Object(j["a"])(regeneratorRuntime.mark((function n(r){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("verifyRef.value.imgCode",e.value.imgCode),t.imgCode=e.value.imgCode||"",t.verify.toLowerCase()==t.imgCode.toLowerCase()){n.next=5;break}return m["a"].fail("验证码有误"),n.abrupt("return");case 5:if("login"!=t.type){n.next=14;break}return n.next=8,Object(k["c"])({loginName:r.username,passwordMd5:R()(r.password)});case 8:a=n.sent,o=a.data,Object(C["c"])("token",o),window.location.href="/",n.next=19;break;case 14:return n.next=16,Object(k["e"])({loginName:r.username1,password:r.password1});case 16:m["a"].success("注册成功"),t.type="login",t.verify="";case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(b["a"])(Object(b["a"])({},Object(r["M"])(t)),{},{toggle:n,onSubmit:a,verifyRef:e})},components:{sHeader:p["a"],vueImgVerify:V}};n("2136");const M=y()(S,[["render",f]]);t["default"]=M},cb29:function(e,t,n){var r=n("23e7"),a=n("81d5"),o=n("44d2");r({target:"Array",proto:!0},{fill:a}),o("fill")}}]);
//# sourceMappingURL=login.a21913d4.js.map